# Nucleus: Project Plan (Kanban) - .NET 9 / Aspire / Azure Cosmos DB Backend

**Attention AI Assistant:** This is the **MACROSTATE**. Use this for overall context and task progression. Update less frequently than Session State, primarily when tasks move between columns. **Refer to `.windsurfrules` for agent behavior guidelines.**

**Last Updated:** `2025-04-18`

---

## üìö Strategic Epics (Long-Term Evolution)

*   [ ] **EPIC-001: Multimodal Content Understanding**
    *   [ ] Research and implement strategies for processing diverse file types (video, audio, code, specialized formats)
    *   [ ] Develop adapters for different AI providers' multimodal models
    *   [ ] Create metric collection to evaluate effectiveness of different interpretation strategies
    *   [ ] Implement persona-specific pre-processing pipelines

*   [ ] **EPIC-002: Context-Aware Semantic Processing**
    *   [ ] Develop algorithms for context-aware *persona analysis* that consider surrounding content or related artifacts.
    *   [ ] Implement progressive refinement of *persona analysis* strategies based on user feedback.
    *   [ ] Create systems for personas to hydrate with context before processing new content.
    *   [ ] Research and implement hierarchical semantic representation models for *persona knowledge*.

*   [ ] **EPIC-003: Learning & Adaptation**
    *   [ ] Build feedback loops to improve *persona analysis* based on retrieval effectiveness.
    *   [ ] Implement incremental learning in processing pipelines.
    *   [ ] Create mechanisms for personas to share and leverage cross-domain insights.
    *   [ ] Develop automated testing framework for processing evolution.

## üöÄ Backlog (Phased Future Work)

### Phase 2: Multi-Platform Integration ([02_REQUIREMENTS_PHASE2_MULTI_PLATFORM.md](../docs/Requirements/02_REQUIREMENTS_PHASE2_MULTI_PLATFORM.md))
*   [ ] **(P2)** Implement Teams Platform Adapter (`Nucleus.Adapters.Teams`).
*   [ ] **(P2)** Implement Slack Platform Adapter (`Nucleus.Adapters.Slack`).
*   [ ] **(P2)** Implement Discord Platform Adapter (`Nucleus.Adapters.Discord`).
*   [ ] **(P2)** Implement advanced agentic query strategies (multi-step, recursive confidence) in `Nucleus.Api` for chat interfaces.
*   [ ] **(P2)** Add basic Chat/Query endpoints to `Nucleus.Api` to support bot interactions.
*   [ ] **(P2)** Enhance `IPlatformAdapter` to handle interactive elements (buttons, mentions, commands).
*   [ ] **(P2)** Implement Email Ingestion Adapter (`Nucleus.Adapters.Email`).
    *   [ ] **TASK-ID-020:** Define `IPlatformAdapter` interface (supporting async like Email).
    *   [ ] **TASK-ID-021:** Implement `EmailAdapter` (`Nucleus.Adapters.Email`) - Choose mechanism (e.g., Function trigger, MailKit service), parse emails, extract attachments, queue processing job. *(Depends on TASK-ID-020, TASK-ID-011)*
    *   [ ] **TASK-ID-022:** Implement Email Sender logic (within Adapter or separate Function/Service) to send replies generated by Personas. *(Depends on TASK-ID-020)*

### Phase 3: Enhancements & Web Application ([03_REQUIREMENTS_PHASE3_ENHANCEMENTS.md](../docs/Requirements/03_REQUIREMENTS_PHASE3_ENHANCEMENTS.md))
*   [ ] **(P3)** Develop Web Application Frontend (Blazor WASM) (`Nucleus.WebApp`).
    *   [ ] Implement Authentication (Entra ID / OIDC).
    *   [ ] Implement Artifact/Knowledge Browsing Views.
    *   [ ] Implement Direct Query Interface.
    *   [ ] Implement Manual Upload Feature (Optional).
*   [ ] **(P3)** Enhance `Nucleus.Api` for Web App support (auth, query endpoints).
*   [ ] **(P3)** Implement Advanced Querying/Retrieval (`IRetrievalService`).
*   [ ] **(P3)** Enhance `IPersona` capabilities (Stateful processing, Tool Use).
*   [ ] **(P3)** Review/Adapt Template Blazor UI (`TASK-MVP-UI-01` - Moved from P1).

### Phase 4: Platform Maturity & Orchestration ([04_REQUIREMENTS_PHASE4_MATURITY.md](../docs/Requirements/04_REQUIREMENTS_PHASE4_MATURITY.md))
*   [ ] **(P4)** Implement Enhanced Platform Bot Interactions (Adaptive Cards, Blocks, Embeds).
*   [ ] **(P4)** Implement Workflow Orchestration (`Nucleus.Orchestrations` with Durable Functions).
    *   [ ] Define orchestration workflows.
    *   [ ] Integrate Orchestrations with Processing Functions.
    *   [ ] Update Status Query for Orchestrations.
*   [ ] **(P4)** Expand Admin UI/API (Monitoring, User Mgmt, Persona Config).
*   [ ] **(P4)** Implement Comprehensive Deployment Automation (`infra/` Bicep/Terraform).
*   [ ] **(P4)** Define Backup/Recovery Strategy.
*   [ ] **(P4)** Implement Foundational work for Public Good (Nomination UI, Vetting Workflow Design, Data Model Update).

### Phase 5: Public Knowledge Repository ([05_REQUIREMENTS_PHASE5_PUBLIC_GOOD.md](../docs/Requirements/05_REQUIREMENTS_PHASE5_PUBLIC_GOOD.md))
*   [ ] **(P5)** Implement Public Knowledge Repository Infrastructure (Storage, Indexing).
*   [ ] **(P5)** Operationalize Contribution & Vetting Workflow (incl. Admin UI for Review).
*   [ ] **(P5)** Implement Public Access/Discovery Mechanisms (Web App Integration, Public Portal/API).
*   [ ] **(P5)** Establish Governance, Attribution, Licensing Policies & Enforcement.
*   [ ] **(P5)** Explore Contribution Incentives (Optional).

### Other Backlog Items (Cross-Cutting / TBD)
*   [ ] Implement `IStateStore` interface and adapters (Cosmos DB?) for Durable Functions state.
*   [ ] Implement `IEventPublisher` interface and `ServiceBusPublisher` adapter in `Nucleus.Infrastructure` (if needed beyond basic queueing).
*   [ ] Implement additional personas (HealthSpecialist, PersonalAssistant, WorldModeler) in `Nucleus.Personas` (after EduFlow validation).
*   [ ] Implement comprehensive integration tests (`tests/Nucleus.IntegrationTests`) using Testcontainers for Cosmos DB/Azurite.
*   [ ] Add robust configuration validation (`Microsoft.Extensions.Options.DataAnnotations`).
*   [ ] Implement caching strategies (`IDistributedCache`).
*   [ ] Add detailed logging/telemetry integration with Application Insights via Aspire ServiceDefaults.
*   [ ] Implement ingestion deduplication strategy based on `ArtifactMetadata` (e.g., hash check or sourceIdentifier uniqueness check in `IArtifactMetadataService`).
*   [ ] **TASK-ID-014:** Implement Comprehensive Unit Testing Strategy *(Covers Infrastructure, Functions, Personas, Orchestrations, API tests)*.
*   [ ] **TASK-ID-015:** Update Project-Wide Copyright Headers (Replace "PlaceholderCompany").
*   [ ] **TASK-ID-016:** Generate Project Documentation from XML Comments using DocFX or similar tool.

## üî® Ready (Prioritized for Core Backend Setup)

*   [ ] **`TASK-ASPIRE-SETUP-01`:** Configure Aspire `AppHost` to manage `Nucleus.ApiService` and necessary dependencies (e.g., Cosmos DB emulator).
*   [ ] **`TASK-API-CORE-01`:** Implement foundational structure for `Nucleus.ApiService` (controllers, DI setup, basic request handling).
*   [ ] **`TASK-COSMOS-IMPL-01`:** Implement `IPersonaKnowledgeRepository` and `IArtifactMetadataRepository` using Azure Cosmos DB adapter within `Nucleus.Infrastructure`.
*   [ ] **`TASK-PERSONA-INTEG-01`:** Integrate initial `BootstrapperPersona` logic into the `Nucleus.ApiService` request flow, connecting to `IGenerativeAI` and Cosmos repositories.
*   [ ] **`TASK-CORE-TEST-01`:** Write initial Unit Tests for core components (ApiService controllers, Cosmos repositories, BootstrapperPersona).
*   [ ] **(WAS `TASK-MVP-INFRA-01`)** Define Basic Azure Infrastructure considerations for ACA deployment (networking, scaling, secrets).

## üë®‚Äçüíª In Progress (Max 1-2 Active Items)

*   *(None Currently)*

## ‚úÖ Done (Recently Completed)

*   [X] **`TASK-MVP-SETUP-01` (`ISSUE-MVP-SETUP-01`):** Configure AI Provider (Gemini via `Mscc.GenerativeAI`).
*   [X] **`TASK-MVP-API-01` (`ISSUE-MVP-API-01`):** Implement initial `Nucleus.Api` endpoint (`/api/query`) *(Context: Completed for prior Console MVP)*.
*   [X] **`TASK-MVP-PERSONA-01` (`ISSUE-MVP-PERSONA-01`):** Define Basic `BootstrapperPersona` Logic & Data Model *(Context: Completed for prior Console MVP)*.
*   [X] **`TASK-MVP-PERSONA-02` (`ISSUE-MVP-PERSONA-01`):** Integrate `BootstrapperPersona` into API Flow *(Context: Completed for prior Console MVP)*.
*   [X] **(P1)** Update Planning/Requirements Docs *(Context: Completed for prior Console MVP)*.
*   [X] **`TASK-MVP-ARCH-01`:** Pivot Architecture & AppHost Config *(Context: Completed for prior Console MVP)*.

## üöß Blockers

*   None currently identified.

---

## üìä Development Philosophy Principles

1. **Progressive Enhancement**: Implement basic functionality first, then iteratively refine and expand capabilities.
2. **Continuous Experimentation**: Artifact interpretation and meaning extraction will require ongoing experimentation and refinement over years.
3. **Persona-Centric Design**: Processing approaches should adapt to the specialized knowledge and needs of different personas.
4. **Contextual Relevance**: Personas determine and extract relevant knowledge based on the artifact and their domain.
5. **Flexible Architecture**: Design systems that can evolve as AI capabilities and our understanding of effective meaning extraction improve.

---